{"ast":null,"code":"import _toConsumableArray from\"C:/Users/sadiq/Desktop/vidly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/sadiq/Desktop/vidly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sadiq/Desktop/vidly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/sadiq/Desktop/vidly/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import MovieForm from\"./MovieForm\";import MovieList from\"./MovieList\";import api from\"../services/api\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var moviesEndpoint=\"/movies\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var fetchMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$api$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(moviesEndpoint);case 3:_yield$api$get=_context.sent;data=_yield$api$get.data;setMovies(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setError(\"Could not fetch the movies!\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchMovies(){return _ref.apply(this,arguments);};}();var handleAddMovie=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(title){var movie,_yield$api$create,savedMovie;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;movie={_id:Date.now(),title:title};setMovies([].concat(_toConsumableArray(movies),[movie]));_context2.next=5;return api.create(moviesEndpoint,movie);case 5:_yield$api$create=_context2.sent;savedMovie=_yield$api$create.data;setMovies([].concat(_toConsumableArray(movies),[savedMovie]));_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);setError(\"Could not save the movie!\");setMovies(movies);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function handleAddMovie(_x){return _ref2.apply(this,arguments);};}();var handleDeleteMovie=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(movie){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setMovies(movies.filter(function(m){return m!==movie;}));_context3.next=4;return api.remove(moviesEndpoint+\"/\"+movie._id);case 4:_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);setError(\"Could not delete the movie!\");setMovies(movies);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function handleDeleteMovie(_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){return fetchMovies();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(MovieForm,{onAddMovie:handleAddMovie}),error&&/*#__PURE__*/_jsx(\"p\",{role:\"alert\",className:\"Error\",children:error}),/*#__PURE__*/_jsx(MovieList,{movies:movies,onDeleteMovie:handleDeleteMovie})]});}export default App;","map":{"version":3,"sources":["C:/Users/sadiq/Desktop/vidly/frontend/src/components/App.jsx"],"names":["React","useState","useEffect","MovieForm","MovieList","api","App","moviesEndpoint","movies","setMovies","error","setError","fetchMovies","get","data","handleAddMovie","title","movie","_id","Date","now","create","savedMovie","handleDeleteMovie","filter","m","remove"],"mappings":"qnBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,GAAP,KAAgB,iBAAhB,CACA,MAAO,WAAP,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,GAAMC,CAAAA,cAAc,CAAG,SAAvB,CADa,cAEeN,QAAQ,CAAC,EAAD,CAFvB,wCAENO,MAFM,eAEEC,SAFF,8BAGaR,QAAQ,EAHrB,yCAGNS,KAHM,eAGCC,QAHD,eAKb,GAAMC,CAAAA,WAAW,0FAAG,iMAEOP,CAAAA,GAAG,CAACQ,GAAJ,CAAQN,cAAR,CAFP,qCAERO,IAFQ,gBAERA,IAFQ,CAGhBL,SAAS,CAACK,IAAD,CAAT,CAHgB,+EAKhBH,QAAQ,CAAC,6BAAD,CAAR,CALgB,oEAAH,kBAAXC,CAAAA,WAAW,0CAAjB,CASA,GAAMG,CAAAA,cAAc,2FAAG,kBAAOC,KAAP,8KAEbC,KAFa,CAEL,CAAEC,GAAG,CAAEC,IAAI,CAACC,GAAL,EAAP,CAAmBJ,KAAK,CAALA,KAAnB,CAFK,CAGnBP,SAAS,8BAAKD,MAAL,GAAaS,KAAb,GAAT,CAHmB,uBAKgBZ,CAAAA,GAAG,CAACgB,MAAJ,CAAWd,cAAX,CAA2BU,KAA3B,CALhB,yCAKLK,UALK,mBAKXR,IALW,CAOnBL,SAAS,8BAAKD,MAAL,GAAac,UAAb,GAAT,CAPmB,qFASnBX,QAAQ,CAAC,2BAAD,CAAR,CACAF,SAAS,CAACD,MAAD,CAAT,CAVmB,uEAAH,kBAAdO,CAAAA,cAAc,6CAApB,CAcA,GAAMQ,CAAAA,iBAAiB,2FAAG,kBAAON,KAAP,uIAEtBR,SAAS,CAACD,MAAM,CAACgB,MAAP,CAAc,SAACC,CAAD,QAAOA,CAAAA,CAAC,GAAKR,KAAb,EAAd,CAAD,CAAT,CAFsB,uBAGhBZ,CAAAA,GAAG,CAACqB,MAAJ,CAAWnB,cAAc,CAAG,GAAjB,CAAuBU,KAAK,CAACC,GAAxC,CAHgB,2FAKtBP,QAAQ,CAAC,6BAAD,CAAR,CACAF,SAAS,CAACD,MAAD,CAAT,CANsB,sEAAH,kBAAjBe,CAAAA,iBAAiB,8CAAvB,CAUArB,SAAS,CAAC,iBAAMU,CAAAA,WAAW,EAAjB,EAAD,CAAsB,EAAtB,CAAT,CAEA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,SAAD,EAAW,UAAU,CAAEG,cAAvB,EADF,CAEGL,KAAK,eACJ,UAAG,IAAI,CAAC,OAAR,CAAgB,SAAS,CAAC,OAA1B,UACGA,KADH,EAHJ,cAOE,KAAC,SAAD,EAAW,MAAM,CAAEF,MAAnB,CAA2B,aAAa,CAAEe,iBAA1C,EAPF,GADF,CAWD,CAED,cAAejB,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport MovieForm from \"./MovieForm\";\nimport MovieList from \"./MovieList\";\nimport api from \"../services/api\";\nimport \"./App.css\";\n\nfunction App() {\n  const moviesEndpoint = \"/movies\";\n  const [movies, setMovies] = useState([]);\n  const [error, setError] = useState();\n\n  const fetchMovies = async () => {\n    try {\n      const { data } = await api.get(moviesEndpoint);\n      setMovies(data);\n    } catch (error) {\n      setError(\"Could not fetch the movies!\");\n    }\n  };\n\n  const handleAddMovie = async (title) => {\n    try {\n      const movie = { _id: Date.now(), title };\n      setMovies([...movies, movie]);\n\n      const { data: savedMovie } = await api.create(moviesEndpoint, movie);\n\n      setMovies([...movies, savedMovie]);\n    } catch (error) {\n      setError(\"Could not save the movie!\");\n      setMovies(movies);\n    }\n  };\n\n  const handleDeleteMovie = async (movie) => {\n    try {\n      setMovies(movies.filter((m) => m !== movie));\n      await api.remove(moviesEndpoint + \"/\" + movie._id);\n    } catch (error) {\n      setError(\"Could not delete the movie!\");\n      setMovies(movies);\n    }\n  };\n\n  useEffect(() => fetchMovies(), []);\n\n  return (\n    <div className=\"App\">\n      <MovieForm onAddMovie={handleAddMovie} />\n      {error && (\n        <p role=\"alert\" className=\"Error\">\n          {error}\n        </p>\n      )}\n      <MovieList movies={movies} onDeleteMovie={handleDeleteMovie} />\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}